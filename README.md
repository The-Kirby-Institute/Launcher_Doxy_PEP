# Launcher_Doxy_PEP

## Overview
This Java package implements an Individual-Based Model (IBM) to explore the potential impact of introducing Doxy-PEP (doxycycline post-exposure prophylaxis) among men who have sex with men (MSM) in New South Wales, Australia.

## Maintainer and developers
* Ben Hui; ORCiD ID: [0000-0002-6567-5821](https://orcid.org/0000-0002-6567-5821)

## Project description
This model extends the [Package_ClusterModel](https://github.com/The-Kirby-Institute/Package_ClusterModel) to simulate the effects of Doxy-PEP on STI transmission dynamics. It introduces additional logic to support Doxy-PEP allocation and its impact on STI natural history.

### Main classes
* Simulation_DoxyPEP 
  Extends _Simulation_ClusterModelTransmission_ to launch simulations with Doxy-PEP support
* Abstract_Runnable_ClusterModel_MultiTransmission_Prophylaxis 
  Extends _Runnable_ClusterModel_MultiTransmission_ with additional fields and overridden methods to model Doxy-PEP allocation and effects.     
* Runnable_ClusterModel_Prophylaxis
  Extends _Abstract_Runnable_ClusterModel_MultiTransmission_Prophylaxis_.This class is tailored to simulate Doxy-PEP introduction among MSM in NSW and is invoked by _Simulation_DoxyPEP_. 
  
### Detailed overview on Runnable_ClusterModel_Prophylaxis
This class extends _Runnable_ClusterModel_ContactMap_Generation_SingleMap_ from the base package. All parameters and configurations applicable to the parent class also apply here. Refer to the Package_ClusterModel documentation for more details.

The key features are:

* Fixed the number of infection to 3 - syphilis, gonorrhoea and chlamydia.
* Fixed the number of infection sites to 4 - any (for syphilis), urethral, rectal and orophraygenal for gonorrhoea and chlamydia. 
* Fixed the numebr of act to 5 - any sex (for transmission of syphilis), anal sex, oral sex, kissing, amd rimming (for transmission of gonorrhoea and chlamydia).

The model is design to support investigation of:
   
* Doxy-PEP eligiblity/uptake triggers:
  - HIV and HIV PrEP usage (as a simple proprotion of the population)
  - Syphilis or other STI diagnoses
  - Number of sexual partners in the past 12 months

* Doxy-PEP behavioral dynamics:
  - Persistence (duration of Doxy-PEP use)
  - Adherence (likelihood of use during sexual encounters)
  - Uptake adjustments based on previous acceptance or refusal
  
Model parameters are defined in:

* simSpecificSim.prop
* simSpecificSwitch.prop (if present)
* User defined SEED_MAP file (if present)

See [Working directory](#working-directory) for setup details.

## Set up
The model consists of three main components:

* [Network](#network)
* [Executable](#executable)
* [Working Directory](#working-directory)

These components can be located anywhere, provided paths are correctly set in simSpecificSim.prop and/or input arguments. For clarity and reusability, it's recommended to keep at least the working directory separate.

A possible set up could be:
<pre>
Network/
└── <b><i>Partnership network CSVs</i></b>
Executable/
├── ClusterModel_lib/
│   └── <b><i>class libraries use by ClusterModel.jar</i></b>
├── ClusterModel.jar
└── Launcher_Doxy_PEP.jar
WorkingDir/
├── simSpecificSim.prop
├── simSpecificSwitch.prop
└── Seed_List.csv <b><i>for example</i></b>
</pre>

### Quick start 

1. Generate Network Files
   Create the required network file(s) and place them in the Network folder.

2. Download ClusterModel Executable
   Download ClusterModel.jar from the [Package_ClusterModel](https://github.com/The-Kirby-Institute/Package_ClusterModel) GitHub repository and place it in the Executable folder.

3. Add Required Libraries
   Download the necessary class libraries as specified in the Package_ClusterModel documentation. Place them in the <b>ClusterModel_lib</b> folder inside the Executable directory.

4. Add Launcher Executable
   Place Launcher_Doxy_PEP.jar in the Executable folder.

5. Set Up Working Directory
   Ensure your working directory contains an XML file named simSpecificSim.prop. If needed, also include simSpecificSwitch.prop.

6. (Optional) Prepare Seed List
   Generate a seed list (a CSV file), if required, for your simulation.

7. Configure Simulation Settings
   Edit simSpecificSim.prop to update file paths and adjust simulation parameters as needed.

8. Run the Model
   Execute the model (see [Executable](#executable). If successful, the model should run and results will be generated in the working directory.


### Network
This component—potentially organised as a standalone directory—stores the partnership network utilised by the model. For more information on the definition of a network and the various methods available to generate one, refer to the Package_ClusterModel documentation.

By default, the model uses a single network generated by _Runnable_ClusterModel_ContactMap_Generation_SingleMap_. Although multimap networks generated by _Runnable_ClusterModel_ContactMap_Generation_MultiMap_ are expected to be compatible, they have not yet been tested.

Once the network is generated and placed in the appropriate directory, you must update the following entry in the simSpecificSim.prop file to point to the folder containing the network:
```xml
<entry key="PROP_CONTACT_MAP_LOC">...</entry>
``` 
See the section on [simSpecificSim.prop](#simspecificsimprop) or a more detailed explanation.
   
### Executable 
To execute the model, use the following Java command:
<pre>
java -jar Launcher_Doxy_PEP.jar <b><i>File_Path_Working_Directory</i></b> [-export_skip_backup] [-printProgress] [-seedMap=<b>SEED_MAP</b>]
</pre>
Arguments:
* <b><i>File_Path_Working_Directory</i></b>: (Required) Path to the working directory where the simulation will run.
* -export_skip_backup: (Optional) Skips the creation of backup files for each snapshot.
* -printProgress: (Optional) Displays simulation progress in the console output.
* -seedMap=<b>SEED_MAP</b>: (Optional) Specifies the path (<b>SEED_MAP</b>) to a custom seed map file.
 
### Working directory
To be updated


#### simSpecificSim.prop

## Publication
To be updated


## Acknowledgments 
This project was supported by the BBV & STI Research, Intervention and Strategic Evaluation (BRISE) program, funded by the NSW Ministry of Health. The Kirby Institute is funded by the Australian Government Department of Health and Aged Care. The views expressed in this publication do not necessarily represent the position of the Australian Government

This research was produced in whole or part by UNSW Sydney researchers and is subject to the UNSW intellectual property policy. For the purposes of Open Access, the author has applied a Creative Commons Attribution CC-BY public copyright licence to any Author Accepted Manuscript (AAM) version arising from this submission.
